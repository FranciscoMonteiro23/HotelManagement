@page
@using HotelManagement.Models
@model HotelManagement.Pages.Funcionarios.DetailsModel

@{
    ViewData["Title"] = "Detalhes do Funcionário";
}

<h1><i class="fas fa-user-tie me-2"></i>Detalhes do Funcionário</h1>

<!-- INFORMAÇÕES DO FUNCIONÁRIO -->
<div class="card shadow-sm border-0 mb-4">
    <div class="card-header bg-primary text-white">
        <h4 class="mb-0"><i class="fas fa-id-card me-2"></i>Informações Pessoais</h4>
    </div>
    <div class="card-body">
        <dl class="row">
            <dt class="col-sm-3">Nome Completo</dt>
            <dd class="col-sm-9">
                <h4 class="text-primary">
                    <i class="fas fa-user-circle me-2"></i>@Model.Funcionario.NomeCompleto
                </h4>
            </dd>

            <dt class="col-sm-3">Nome</dt>
            <dd class="col-sm-9"><strong>@Model.Funcionario.Nome</strong></dd>

            <dt class="col-sm-3">Apelido</dt>
            <dd class="col-sm-9"><strong>@Model.Funcionario.Apelido</strong></dd>

            <dt class="col-sm-3">Documento/NIF</dt>
            <dd class="col-sm-9">
                <span class="badge bg-secondary fs-6">@Model.Funcionario.Documento</span>
            </dd>

            <dt class="col-sm-3">Telefone</dt>
            <dd class="col-sm-9">
                <a href="tel:@Model.Funcionario.Telefone" class="text-decoration-none">
                    <i class="fas fa-phone me-2 text-success"></i>@Model.Funcionario.Telefone
                </a>
            </dd>

            <dt class="col-sm-3">Email</dt>
            <dd class="col-sm-9">
                <a href="mailto:@Model.Funcionario.Email" class="text-decoration-none">
                    <i class="fas fa-envelope me-2 text-primary"></i>@Model.Funcionario.Email
                </a>
            </dd>
        </dl>
    </div>
</div>

<!-- INFORMAÇÕES PROFISSIONAIS -->
<div class="card shadow-sm border-0 mb-4">
    <div class="card-header bg-success text-white">
        <h4 class="mb-0"><i class="fas fa-briefcase me-2"></i>Informações Profissionais</h4>
    </div>
    <div class="card-body">
        <dl class="row">
            <dt class="col-sm-3">Cargo</dt>
            <dd class="col-sm-9">
                @switch (Model.Funcionario.Cargo)
                {
                    case CargoFuncionario.Recepcionista:
                        <span class="badge bg-info fs-5">
                            <i class="fas fa-concierge-bell me-1"></i>Recepcionista
                        </span>
                        break;
                    case CargoFuncionario.Camareira:
                        <span class="badge bg-success fs-5">
                            <i class="fas fa-broom me-1"></i>Camareira
                        </span>
                        break;
                    case CargoFuncionario.Gerente:
                        <span class="badge bg-danger fs-5">
                            <i class="fas fa-user-shield me-1"></i>Gerente
                        </span>
                        break;
                    case CargoFuncionario.Manutencao:
                        <span class="badge bg-warning fs-5">
                            <i class="fas fa-tools me-1"></i>Manutenção
                        </span>
                        break;
                    case CargoFuncionario.Seguranca:
                        <span class="badge bg-dark fs-5">
                            <i class="fas fa-shield-alt me-1"></i>Segurança
                        </span>
                        break;
                    case CargoFuncionario.Chef:
                        <span class="badge bg-primary fs-5">
                            <i class="fas fa-utensils me-1"></i>Chef
                        </span>
                        break;
                }
            </dd>

            <dt class="col-sm-3">Data de Contratação</dt>
            <dd class="col-sm-9">
                <i class="fas fa-calendar-check me-2"></i>
                @Model.Funcionario.DataContratacao.ToString("dd/MM/yyyy")
            </dd>

            <dt class="col-sm-3">Tempo de Casa</dt>
            <dd class="col-sm-9">
                @{
                    var tempoServico = DateTime.Now - Model.Funcionario.DataContratacao;
                    var anos = tempoServico.Days / 365;
                    var meses = (tempoServico.Days % 365) / 30;
                }
                <span class="badge bg-info fs-6">
                    <i class="fas fa-clock me-1"></i>
                    @anos ano(s) e @meses mes(es)
                </span>
            </dd>
        </dl>
    </div>
</div>

<!-- SETORES ATRIBUÍDOS -->
@if (Model.Funcionario.AtribuicaoSetores != null && Model.Funcionario.AtribuicaoSetores.Any())
{
    <div class="card shadow-sm border-0 mb-4">
        <div class="card-header bg-info text-white">
            <h4 class="mb-0"><i class="fas fa-building me-2"></i>Setores Atribuídos</h4>
        </div>
        <div class="card-body">
            <div class="row">
                @foreach (var atribuicao in Model.Funcionario.AtribuicaoSetores)
                {
                    <div class="col-md-6 mb-3">
                        <div class="card border-primary">
                            <div class="card-body">
                                <h5 class="card-title">
                                    <i class="fas fa-building me-2 text-primary"></i>
                                    @atribuicao.Setor.NomeSetor
                                </h5>
                                <p class="card-text text-muted">
                                    <i class="fas fa-info-circle me-2"></i>
                                    @atribuicao.Setor.Descricao
                                </p>
                                <span class="badge bg-primary">
                                    <i class="fas fa-users me-1"></i>
                                    @atribuicao.Setor.NumeroFuncionarios funcionários
                                </span>
                            </div>
                        </div>
                    </div>
                }
            </div>
        </div>
    </div>
}
else
{
    <div class="alert alert-warning">
        <i class="fas fa-exclamation-triangle me-2"></i>
        Este funcionário ainda não possui setores atribuídos.
    </div>
}

<!-- BOTÕES DE AÇÃO -->
<div class="d-flex gap-2 mb-4">
    <a asp-page="./Edit" asp-route-id="@Model.Funcionario.FuncionarioID" class="btn btn-warning">
        <i class="fas fa-edit me-2"></i>Editar Funcionário
    </a>
    <a asp-page="./Delete" asp-route-id="@Model.Funcionario.FuncionarioID" class="btn btn-danger">
        <i class="fas fa-trash me-2"></i>Apagar Funcionário
    </a>
    <a asp-page="./Index" class="btn btn-secondary ms-auto">
        <i class="fas fa-arrow-left me-2"></i>Voltar à Lista
    </a>
</div>